!function(e,t){"use strict";function o(e){n(e),s(e),h(e),d(e),u(e)}function n(e){if(m)switch(e){case"simple":m.setStyle(w[e].style);break;case"choropleth":var t=w[e].style.fillColor,o=i(t);m.setStyle(function(t){var n=JSON.parse(JSON.stringify(w[e].style));return n.fillColor=l(o,t.properties[w[e].data]),n})}}function l(e,t){return t>1e6?e[0]:t>5e5?e[1]:t>2e5?e[2]:t>1e5?e[3]:t>5e4?e[4]:t>2e4?e[5]:t>1e4?e[6]:e[7]}function i(e){var t=Please.HEX_to_HSV(e),o=Please.make_scheme(t,{scheme_type:"analogous"}),n=a(o[0]),l=r(o[3]);return[a(n),n,o[0],o[1],o[2],o[3],l,r(l)]}function a(e){var t=Please.HEX_to_HSV(e);return t.v>.3&&(t.v-=.3),Please.HSV_to_HEX(t)}function r(e){var t=Please.HEX_to_HSV(e);return t.s>.3&&(t.s-=.3),Please.HSV_to_HEX(t)}function s(e){t.getElementsByClassName("leaflet-overlay-pane")[0].style.mixBlendMode=w[e].blend||"normal"}function h(e){m&&(w[e].labels?m.bindTooltip(c,{direction:"top"}):m.unbindTooltip())}function c(e){var t="",o=e.feature.properties;return o.name&&(t+="<b>"+o.name+"</b>"),o.adm0name&&(t+="<br>"+o.adm0name),t}function p(e){n(e),g.update()}function d(e){w[e].info?f.addControl(g):f.removeControl(g)}function u(e){w[e].legend?f.addControl(v):f.removeControl(v)}var f,m,g,v,y="simple",x=y,w={simple:{style:{radius:4,fill:!0,fillColor:"#6699ff",fillOpacity:1,weight:.5,stroke:!0,color:"#455F91",opacity:.8},blend:"normal",labels:!1},choropleth:{style:{radius:4,fill:!0,fillColor:"#FF4D4D",fillOpacity:1,weight:.5,stroke:!0,color:"#000000",opacity:.8},data:"pop_max",info:!0,legend:!0}},C={simple:{fill:{min:1,max:10,step:1},stroke:{min:.1,max:4,step:.1}},choropleth:{fill:{min:1,max:10,step:1},stroke:{min:.1,max:4,step:.1}}},b={blend:[{value:"normal",text:"Normal"},{value:"multiply",text:"Multiply"},{value:"screen",text:"Screen"},{value:"overlay",text:"Overlay"},{value:"lighten",text:"Lighten"},{value:"darken",text:"Darken"},{value:"color-dodge",text:"Color dodge"},{value:"color-burn",text:"Color burn"},{value:"hard-light",text:"Hard light"},{value:"soft-light",text:"Soft light"},{value:"difference",text:"Difference"},{value:"exclusion",text:"Exclusion"},{value:"hue",text:"Hue"},{value:"saturation",text:"Saturation"},{value:"color",text:"Color"},{value:"luminosity",text:"Luminosity"}],data:[{value:"pop_max",text:"Population max"},{value:"pop_min",text:"Population min"},{value:"pop_other",text:"Population other"}]};e.onload=function(){var t=S.styler("styler",{title:"Style",desc:"CHANGE THE VISUALIZATION",onchange:function(e){x=e.id,setTimeout(function(){o(x)},0)}}),a=S.panel("simple",{title:"Simple"}).addTo(t);S.sizeColor({title:"FILL",default:{show:w.simple.style.fill,size:w.simple.style.radius,color:w.simple.style.fillColor,alpha:w.simple.style.fillOpacity},range:C.simple.fill,onchangeShow:function(e){w.simple.style.fill=e,n(y)},onchangeSize:function(e){w.simple.style.radius=e,n(y)},onchangeColor:function(e){w.simple.style.fillColor=e,n(y)},onchangeAlpha:function(e){w.simple.style.fillOpacity=e,n(y)}}).addTo(a),S.sizeColor({title:"STROKE",default:{show:w.simple.style.stroke,size:w.simple.style.weight,color:w.simple.style.color,alpha:w.simple.style.opacity},range:C.simple.stroke,onchangeShow:function(e){w.simple.style.stroke=e,n(y)},onchangeSize:function(e){w.simple.style.weight=e,n(y)},onchangeColor:function(e){w.simple.style.color=e,n(y)},onchangeAlpha:function(e){w.simple.style.opacity=e,n(y)}}).addTo(a),S.comboBox({title:"BLENDING",default:w.simple.blend,choices:b.blend,onchange:function(e){w.simple.blend=e,s(y)}}).addTo(a),S.checkBox({title:"LABELS",default:w.simple.labels,onchange:function(e){w.simple.labels=e,h(y)}}).addTo(a);var r=S.panel("choropleth",{title:"Choropleth"}).addTo(t);S.comboBox({title:"DATA",default:w.choropleth.data,choices:b.data,onchange:function(e){w.choropleth.data=e,p("choropleth")}}).addTo(r),S.sizeColor({title:"FILL",default:{show:w.choropleth.style.fill,size:w.choropleth.style.radius,color:w.choropleth.style.fillColor,alpha:w.choropleth.style.fillOpacity},range:C.choropleth.fill,onchangeShow:function(e){w.choropleth.style.fill=e,n("choropleth")},onchangeSize:function(e){w.choropleth.style.radius=e,n("choropleth"),v.update()},onchangeColor:function(e){w.choropleth.style.fillColor=e,v.update(),n("choropleth")},onchangeAlpha:function(e){w.choropleth.style.fillOpacity=e,n("choropleth")}}).addTo(r),S.sizeColor({title:"STROKE",default:{show:w.choropleth.style.stroke,size:w.choropleth.style.weight,color:w.choropleth.style.color,alpha:w.choropleth.style.opacity},range:C.choropleth.stroke,onchangeShow:function(e){w.choropleth.style.stroke=e,n("choropleth")},onchangeSize:function(e){w.choropleth.style.weight=e,n("choropleth")},onchangeColor:function(e){w.choropleth.style.color=e,n("choropleth")},onchangeAlpha:function(e){w.choropleth.style.opacity=e,n("choropleth")}}).addTo(r),S.checkBox({title:"INFO",default:w.choropleth.info,onchange:function(e){w.choropleth.info=e,d("choropleth")}}).addTo(r),S.checkBox({title:"LEGEND",default:w.choropleth.legend,onchange:function(e){w.choropleth.legend=e,u("choropleth")}}).addTo(r),f=L.map("map",{minZoom:2,maxZoom:14,zoomControl:!0,zoomAnimation:!1,scrollWheelZoom:!1}).setView([0,0],2),e.addEventListener("wheel",function(){}),e.addEventListener("mousewheel",function(){});L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(f),new Dropzone("dropzone").onload=function(e){m=L.geoJSON(e,{onEachFeature:function(e,t){t.on({mouseover:function(e){var t=e.target;L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront(),g.update(t.feature.properties)},mouseout:function(){g.update()}})},pointToLayer:function(e,t){return L.circleMarker(t)},filter:function(){return!0}}).addTo(f),o(x)},g=L.control(),g.onAdd=function(){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},g.update=function(e){var t={pop_max:"Max",pop_min:"Min",pop_other:"Other"},o=w.choropleth.data;this._div&&(this._div.innerHTML="<h4>World Population ("+t[o]+")</h4>"+(e?"<b>"+e.name+"</b><br />"+e[o]+" people":""))},v=L.control({position:"bottomright"}),v.onAdd=function(){return this._div=L.DomUtil.create("div","info legend"),this.update(),this._div},v.update=function(){var e=[0,1e4,2e4,5e4,1e5,2e5,5e5,1e6],t=["0","10k","20k","50k","100k","200k","500k","1m"],o=w.choropleth.style.fillColor,n=i(o);if(this._div){this._div.innerHTML="";for(var a=0;a<e.length;a++)this._div.innerHTML+='<i style="background:'+l(n,e[a]+1)+'"></i> '+t[a]+(t[a+1]?"&ndash;"+t[a+1]+"<br>":"+")}}}}(window,document),function(e,t){"use strict";function o(e){this.id=e,this.validExtensions=["geojson","json"],this.defaultMessage="Drop the file here",this._init(),this._events()}o.prototype._init=function(){if(this.element=t.getElementById(this.id),!this.element)throw Error('Dropzone id "'+this.id+'" not found');this.content=t.createElement("div"),this.icon=t.createElementNS("http://www.w3.org/2000/svg","svg"),this.icon.setAttribute("width","50"),this.icon.setAttribute("height","43"),this.icon.setAttribute("viewBox","0 0 50 43"),this.path=t.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("d","M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"),this.title=t.createElement("h1"),this.title.innerHTML=this.defaultMessage,this.element.classList.add("dropzone-container"),this.content.classList.add("dropzone-content"),this.icon.classList.add("dropzone-icon"),this.title.classList.add("dropzone-title"),this.element.appendChild(this.content),this.content.appendChild(this.icon),this.content.appendChild(this.title),this.icon.appendChild(this.path)},o.prototype._events=function(){var t=this;["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(t){e.addEventListener(t,function(e){e.preventDefault(),e.stopPropagation()})}),["dragover","dragenter"].forEach(function(e){t.element.addEventListener(e,function(){t.element.classList.add("is-dragover")})}),["dragleave","dragend"].forEach(function(e){t.element.addEventListener(e,function(){t.element.classList.remove("is-dragover")})}),this.element.addEventListener("drop",function(e){var o=e.dataTransfer.files;if(1!==o.length)t.shake("Multiple files not supported");else{var n=o[0],l=n.name.split(".").pop().toLowerCase();if(-1===t.validExtensions.indexOf(l))t.shake("Wrong file extension");else{var i=new FileReader;i.onloadstart=function(){t.title.innerHTML="Loading..."},i.onloadend=function(){try{var e=JSON.parse(this.result);e.hasOwnProperty("type")&&"FeatureCollection"===e.type&&(t.element.style.display="none",t.onload(e))}catch(e){t.shake("Wrong file content")}},i.readAsText(n)}}})},o.prototype.shake=function(e){this.element.classList.remove("is-dragover"),this.element.classList.add("shake"),this.title.innerHTML=e,setTimeout(function(){this.title.innerHTML=this.defaultMessage,this.element.classList.remove("shake")}.bind(this),2e3)},o.prototype.onload=function(){},e.Dropzone=o}(window,document);